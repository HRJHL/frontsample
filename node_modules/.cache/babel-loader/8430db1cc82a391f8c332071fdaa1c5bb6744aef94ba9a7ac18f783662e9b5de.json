{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"coupon-box\"\n}, \" 5,000원 쿠폰 적용 \", -1 /* HOISTED */);\nconst _hoisted_2 = {\n  ref: \"paymentMethod\"\n};\nconst _hoisted_3 = {\n  ref: \"agreement\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", null, [_createCommentVNode(\" 할인 쿠폰 \"), _createElementVNode(\"div\", null, [_createElementVNode(\"input\", {\n    type: \"checkbox\",\n    id: \"coupon-box\",\n    onChange: _cache[0] || (_cache[0] = (...args) => $options.applyCoupon && $options.applyCoupon(...args))\n  }, null, 32 /* NEED_HYDRATION */), _hoisted_1]), _createCommentVNode(\" 결제 UI \"), _createElementVNode(\"div\", _hoisted_2, null, 512 /* NEED_PATCH */), _createCommentVNode(\" 이용약관 UI \"), _createElementVNode(\"div\", _hoisted_3, null, 512 /* NEED_PATCH */), _createCommentVNode(\" 결제하기 버튼 \"), _createElementVNode(\"button\", {\n    class: \"button\",\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.processPayment && $options.processPayment(...args)),\n    style: {\n      \"margin-top\": \"30px\"\n    }\n  }, \"결제하기\")]);\n}","map":{"version":3,"names":["_createElementVNode","for","ref","_createElementBlock","_createCommentVNode","type","id","onChange","_cache","args","$options","applyCoupon","_hoisted_1","_hoisted_2","_hoisted_3","class","onClick","processPayment","style"],"sources":["/Users/dong-eui/Desktop/sample/sendgo/src/views/toss/TossCheck.vue"],"sourcesContent":["<template>\n  <div>\n    <!-- 할인 쿠폰 -->\n    <div>\n      <input type=\"checkbox\" id=\"coupon-box\" @change=\"applyCoupon\" />\n      <label for=\"coupon-box\"> 5,000원 쿠폰 적용 </label>\n    </div>\n    <!-- 결제 UI -->\n    <div ref=\"paymentMethod\"></div>\n    <!-- 이용약관 UI -->\n    <div ref=\"agreement\"></div>\n    <!-- 결제하기 버튼 -->\n    <button class=\"button\" @click=\"processPayment\" style=\"margin-top: 30px\">결제하기</button>\n  </div>\n</template>\n\n<script>\nimport TossPayments from '@tosspayments/payment-sdk';\n\nexport default {\n  data() {\n    return {\n      couponApplied: false,\n      amount: 50000,\n      clientKey: 'test_ck_Z61JOxRQVEnMKwkkDyw0rW0X9bAq',\n      customerKey: '3blrC04giS82FlXAEiVeP',\n      tossPayments: null,\n      widgets: null\n    };\n  },\n  mounted() {\n    this.initializeTossPayments();\n  },\n  methods: {\n    async initializeTossPayments() {\n      // Toss Payments 초기화\n      this.tossPayments = TossPayments(this.clientKey);\n      \n      // 회원 결제 설정\n      this.widgets = this.tossPayments.widgets({ customerKey: this.customerKey });\n      \n      // 주문의 결제 금액 설정\n      await this.widgets.setAmount({\n        currency: 'KRW',\n        value: this.amount\n      });\n\n      // 결제 UI 및 이용약관 UI 렌더링\n      await Promise.all([\n        this.renderPaymentMethods(),\n        this.renderAgreement()\n      ]);\n    },\n    async renderPaymentMethods() {\n      await this.widgets.renderPaymentMethods({\n        selector: this.$refs.paymentMethod,\n        variantKey: 'DEFAULT'\n      });\n    },\n    async renderAgreement() {\n      await this.widgets.renderAgreement({\n        selector: this.$refs.agreement,\n        variantKey: 'AGREEMENT'\n      });\n    },\n    async applyCoupon() {\n      if (this.couponApplied) {\n        await this.widgets.setAmount({\n          currency: 'KRW',\n          value: this.amount + 5000\n        });\n      } else {\n        await this.widgets.setAmount({\n          currency: 'KRW',\n          value: this.amount - 5000\n        });\n      }\n      this.couponApplied = !this.couponApplied;\n    },\n    async processPayment() {\n      try {\n        await this.widgets.requestPayment({\n          orderId: '7P02U-Rya0kPedd712sSV',\n          orderName: '토스 티셔츠 외 2건',\n          successUrl: `${window.location.origin}/success.html`,\n          failUrl: `${window.location.origin}/fail.html`,\n          customerEmail: 'customer123@gmail.com',\n          customerName: '김토스',\n          customerMobilePhone: '01012341234'\n        });\n      } catch (error) {\n        console.error('결제 요청 중 오류 발생:', error);\n        // 오류 처리 로직 추가\n      }\n    }\n  }\n};\n</script>\n\n<style>\n/* 필요한 스타일링 추가 */\n</style>\n"],"mappings":";gCAKMA,mBAAA,CAA8C;EAAvCC,GAAG,EAAC;AAAY,GAAC,gBAAc;;EAGnCC,GAAG,EAAC;AAAe;;EAEnBA,GAAG,EAAC;AAAW;;uBATtBC,mBAAA,CAYM,cAXJC,mBAAA,WAAc,EACdJ,mBAAA,CAGM,cAFJA,mBAAA,CAA+D;IAAxDK,IAAI,EAAC,UAAU;IAACC,EAAE,EAAC,YAAY;IAAEC,QAAM,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAC,WAAA,IAAAD,QAAA,CAAAC,WAAA,IAAAF,IAAA,CAAW;qCAC3DG,UAA8C,C,GAEhDR,mBAAA,WAAc,EACdJ,mBAAA,CAA+B,OAA/Ba,UAA+B,+BAC/BT,mBAAA,aAAgB,EAChBJ,mBAAA,CAA2B,OAA3Bc,UAA2B,+BAC3BV,mBAAA,aAAgB,EAChBJ,mBAAA,CAAqF;IAA7Ee,KAAK,EAAC,QAAQ;IAAEC,OAAK,EAAAR,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAO,cAAA,IAAAP,QAAA,CAAAO,cAAA,IAAAR,IAAA,CAAc;IAAES,KAAwB,EAAxB;MAAA;IAAA;KAAyB,MAAI,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}